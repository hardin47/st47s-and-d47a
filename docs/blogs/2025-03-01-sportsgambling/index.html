<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jo Hardin">
<meta name="dcterms.date" content="2025-03-01">

<title>Let’s teach them what they need to know – Jo Hardin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-cefdfbcfa0f9175e4f4c1c168572b3ef.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-fd0fa9193002a1f36c15a3ff5855070d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/favicon.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jo Hardin</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../courses.html"> 
<span class="menu-text">courses</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html"> 
<span class="menu-text">research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blogs.html"> 
<span class="menu-text">blogs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../letters.html"> 
<span class="menu-text">rec letters</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-california-debate" id="toc-the-california-debate" class="nav-link active" data-scroll-target="#the-california-debate">The California Debate</a></li>
  <li><a href="#sports-gambling" id="toc-sports-gambling" class="nav-link" data-scroll-target="#sports-gambling">Sports Gambling</a></li>
  <li><a href="#recommendation" id="toc-recommendation" class="nav-link" data-scroll-target="#recommendation">Recommendation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Let’s teach them what they need to know</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jo Hardin </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="blog">
<div class="blog-header">
<p>Association for Women in Mathematics</p>
</div>
<div class="blog-container">
<p>The following entry originally appeared in the 2025 March-April <a href="https://awm-math.org/publications/newsletter/" target="_blank">Newsletter for the Association for Women in Mathematics</a>.</p>
</div>
</div>
<!-- image source: https://commons.wikimedia.org/wiki/File:Sports_and_games.svg -->
<p><br></p>
<p>I don’t know the full history or choices along the way that built the 20th and 21st century math curriculum in California public schools, or anywhere else, for that matter. But I do know that the space race in the 1950s and 60s and the related Cold War throughout the second half of the 20th century drew the best and the brightest of our students into physics. In terms of mathematics, calculus is fundamental to understanding physics and working in any of the related fields, including astronomy and engineering. So, it doesn’t surprise me that our public schools contain mathematics curricula that build directly toward the top students completing a two-course sequence of Calculus 1 and Calculus 2 by the time they graduate from high school.</p>
<p>But there is a case to be made that our national interests have changed, and it might be in our best interests to take domestic threats more seriously. In particular, I believe that we do a disservice to our high school students when they graduate without having engaged with statistics, modeling, or really any data analysis at all.</p>
<p>Below I detail some of the ongoing debates happening in the state of California. I also describe one of our newest threats to poverty and income inequality: online sports gambling. And while I know that we need to continue to train some of our students in calculus (we still need physicists, after all!), I would like to see the structure of the curriculum flipped so that most students are focused on data acumen skills and some students are focused on calculus skills.</p>
<section id="the-california-debate" class="level2">
<h2 class="anchored" data-anchor-id="the-california-debate">The California Debate</h2>
<p>In 2020, the UC Board of Admissions and Relations with Schools (BOARS) for the University of California system (including UC Berkeley and UCLA) <a href="https://senate.universityofcalifornia.edu/_files/committees/boars/documents/statement-on-mathematics-preparation-for-uc.pdf" target="_blank">confirmed long-standing practice</a> that the Algebra II requirement could be <a href="https://admission.universityofcalifornia.edu/counselors/_files/documents/quick-reference-guide-to-uc-admissions.pdf" target="_blank">validated</a> by students who had taken Data Science or Statistics. The 2020 BOARS decision was grounded in being an “equity issue”, where the state “By clarifying the definition of college math readiness and expanding the choices of area C math courses students can take to be eligible for UC admissions, students should be encouraged to pursue the mathematics education most relevant to their academic and career goals.” However, in the same document, they seem to undermine the equity issue by “strongly encourag[ing] [students] to consider a math course sequence that prepares them for calculus.” Which reads as if they still believe that calculus should be the pinnacle of high school mathematics but that not everyone has access to get there.</p>
<p>Recently, BOARS has revisited their 2020 decision, spurred on partly by mathematicians who believe data science is dumbing down the mathematics curriculum. In 2023, more than four hundred faculty from California institutions signed on to an <a href="https://sites.google.com/view/mathindatamatters/home" target="_blank">open letter</a>, which argues, among other things, that the only reasonable path for any STEM major is the Algebra II to Calculus pathway. The result was that in 2024, <a href="https://senate.universityofcalifornia.edu/_files/committees/boars/documents/boarsacwphase1report-20240221.pdf" target="_blank">BOARS and UCOP (UC Office of the President) reversed their 2020 decision</a> and declared that beginning with Fall 2025, only calculus-based courses will “validate” Algebra II.</p>
<p>Despite the UC system doubling down on the calculus pathway, David Bressoud (DeWitt Wallace Professor Emeritus, Macalester College) <a href="https://www.mathvalues.org/masterblog/launchings20201001" target="_blank">explains</a> how broken the calculus pathway really is. He argues that “[w]hat has happened to calculus in the United States has exacerbated the inequities of our educational system. In 2019, 12.7% of all White graduating seniors had taken an AP Calculus exam, and two-thirds of them had earned a three or higher. That same year, only 3.7% of Black seniors had taken an AP Calculus exam, and only 40% of them earned a three or higher.” He recognizes that the “singular focus on calculus sucks the oxygen out of” building a strong curriculum for statistics and data science. He argues that what is needed is a “truly co-equal path that develops computational and data skills.”</p>
<p>In November of 2024, BOARS and UCOP went one step further to announce that, starting in August 2025, fourth year mathematics courses will now belong to one of two categories. “Category 3” courses build substantially upon the content of Algebra II and can be used to validate Algebra II. “Category 4” courses are all other “advanced” courses.<br>
<strong>need a full reference:</strong> https://hs-articulation.ucop.edu/guide/a-g-subject-requirements/c-mathematics/</p>
<p>The consequences of the UC decision are that many school districts are dropping statistics and data science (and some computer science) courses. The two tiers of fourth-year math courses add a hierarchy which discourages school districts from spending money on lower tier course. UCOP has countered that they will not publicize which course is in which category, except that pre-calculus and calculus are both in Category 3. But that, of course, just reinforces what risk-adverse school districts may already think: no need to take a chance on statistics.</p>
</section>
<section id="sports-gambling" class="level2">
<h2 class="anchored" data-anchor-id="sports-gambling">Sports Gambling</h2>
<p>The high school / university curricular debate aside, it is worth considering <strong>why</strong> the debate feels so important. The Stanford History Education Group did <a href="https://stacks.stanford.edu/file/druid:fv751yt5934/SHEG%20Evaluating%20Information%20Online.pdf" target="_blank">an extensive analysis</a> to assess college students’ online reasoning. They found that their ability to reason about information on the internet was “bleak”. The students were unable to reason through why they should or shouldn’t believe a particular online claim. The study found that students accepted as truth the information presented to them, even when there was no supporting evidence or citations. In many scenarios, an inability to discern online truths will not negatively impact one’s life. But there are some situations, however, where having a good sense of online scams can lead to keeping oneself out of bankruptcy.</p>
<p>In May 2018, the US Supreme Court struck down the Professional and Amateur Sports Protection Act (PASPA), a law that prevented gambling on both collegiate and professional sports. In the wake of that decision, sports gambling has become ubiquitous, particularly within online platforms. That is, the dismantling of the regulation opened the doors, but online technology opened the flood gates. Websites like FanDuel and DraftKings make it remarkably simply to connect your bank account to the gambling platform, and they bombard you with exciting opportunities to win big.</p>
<p>One of the main ways that online gambling platforms make money is through something called a parlay bet. A parlay is a type of bet in which multiple selections are made on different events (e.g., LA Dodgers win the game <strong>and</strong> Ohtani hits a home run at some point during the game <strong>and</strong> someone scores in the first inning). It is difficult to win a parlay bet because each event must come out in your favor in order to win. On the flip side, the platform pays long odds (extra money) for those times when the parlay does win. The long odds make the bet seem like a good idea. Unsurprisingly to mathematicians, however, <a href="https://leans.ai/betting/how-to/are-parlays-worth-it/" target="_blank">“the bookmakers are taking advantage of the increased risk involved in a parlay by offering lower odds”</a> than would be reasonable. And certainly, the platform would not allow you to take the other side of the parlay bet. That is, the platform offers a big payout if your parlay wins, but if the betting market were even somewhat close to fair, the offer should be for a truly ginormous payout if your parlay wins.</p>
<p>Understanding the concept of expected value (the long run average on the return of, say, a parlay bet) is paramount to being able to know whether the online gaming platforms are taking advantage of their users (spoiler: they are). Season 4 of Michael Lewis’ podcast, <a href="https://www.pushkin.fm/podcasts/against-the-rules" target="_blank">Against the Rules</a>, walks through how being data illiterate leaves you open to being taken advantage of by online gaming platforms. He describes the tactics that the industries use (e.g., not allowing large bets from individuals who win) that take advantage of a population of people who are not trained to understand critical reasoning through data. The podcast serves as a warning for anyone considering online sports gambling, but it is only one small directive in a sea of industries set up to take advantage of people who are not trained to understand data, evidence, and reasoning. All important concepts taught in a data science course.</p>
</section>
<section id="recommendation" class="level2">
<h2 class="anchored" data-anchor-id="recommendation">Recommendation</h2>
<p>In the end, I find the curricular part of the debate between Algebra II and Data Science to be distracting. The material in both classes is incredibly important. But when it comes to serving the vast majority of high school students in California public schools, I believe that the material in a data science or statistics course is more incredibly important. That is, I’d like to see us focus on how we can get every single high school student graduating with some kind of training in data. While I recognize that there is only so much space in a high school curriculum, I advocate for data training above most other things. I worry that we do our students a disservice when we send them out into a world designed and optimized to take advantage of them. It is in our national interest to train students to be wary consumers who understand how the data around them is being used purposefully to enrich large corporations and their CEOs. Let’s take care of each other and teach our students what they need to know.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hardin47\.netlify\.app\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, Jo Hardin</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built with 💚 and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>